<Page
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Contacto"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ViewModel="using:Contacto.ViewModel"
    x:Class="Contacto.MainPage"
    mc:Ignorable="d"
    DataContext= "{Binding RelativeSource={RelativeSource Mode=Self}, UpdateSourceTrigger=PropertyChanged}"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <Page.Resources>

        <Style TargetType="Path" x:Key="HeaderStyleUnselected" x:Name="HeaderStyleUnselected">
            <Setter Property="Fill" Value="#FF838192" />
        </Style>

        <Style TargetType="Path" x:Key="HeaderStyleSelected" x:Name="HeaderStyleSelected">
            <Setter Property="Fill" Value="Silver"/>
        </Style>

        <DataTemplate x:Key="ImageTextListMailFolderTemplate" >
            <Border BorderBrush="#363951"  BorderThickness="0, 1, 0, 1">
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" 
                        VerticalAlignment="Bottom" Background="#0C0B15"  Width="400" Margin="0,0,0,0" 
                        IsHoldingEnabled="True" DoubleTapped="StackPanel_DoubleTapped"   >
                    <FlyoutBase.AttachedFlyout>
                        <MenuFlyout>
                            <MenuFlyoutItem Text="Delete Contact" Click="MenuFlyoutItem_Click"/>
                        </MenuFlyout>
                    </FlyoutBase.AttachedFlyout>


                    <TextBlock Text="{Binding mufirstName, UpdateSourceTrigger=PropertyChanged}" FontSize="24" FontWeight="SemiBold" 
        			Margin="10,10,0,0" HorizontalAlignment="Center" VerticalAlignment="Center"
        			TextTrimming="WordEllipsis" TextWrapping="Wrap"/>

                    <TextBlock Text="{Binding mulastName, UpdateSourceTrigger=PropertyChanged}"
                           FontSize="24" FontWeight="SemiBold" 
        			Margin="10,10,0,0" HorizontalAlignment="Center" VerticalAlignment="Center"
        			TextTrimming="WordEllipsis" TextWrapping="Wrap"/>
                </StackPanel>
            </Border>

        </DataTemplate>

        <DataTemplate x:Key="GridTemplate">
            <Grid Width="173" Margin="5,5,5,5" Tapped="Group_Tapped" DoubleTapped="GridForGroups_DoubleTapped">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>


                <FlyoutBase.AttachedFlyout>
                    <MenuFlyout x:Name="GroupFlyout">
                        <MenuFlyoutItem Text="Delete Group" Click="MenuFlyoutItem_Click_Group"/>
                    </MenuFlyout>
                </FlyoutBase.AttachedFlyout>



                <Border Background="#363951" Height="173" Width="173" 
                        Grid.Row="0" HorizontalAlignment="Left" Opacity="0.3" >
                </Border>

                <TextBlock FontSize="32" Text="{Binding myGroupName}" HorizontalAlignment="Left" FontWeight="SemiBold" TextWrapping="WrapWholeWords"/>
            </Grid>

        </DataTemplate>
        <DataTemplate x:Key="backupTemplate">
            <Border BorderBrush="#363951"  BorderThickness="0, 1, 0, 1">
                <StackPanel Orientation="Vertical" HorizontalAlignment="Center" 
                        VerticalAlignment="Bottom"  Width="400" Margin="0,0,0,0" >
                    <TextBlock Text="{Binding title, UpdateSourceTrigger=PropertyChanged}" FontSize="20" FontWeight="SemiBold" 
        			Margin="10,10,0,0" HorizontalAlignment="Center" VerticalAlignment="Center"
        			TextTrimming="WordEllipsis" TextWrapping="Wrap"/>
                    <TextBlock Text="{Binding date, UpdateSourceTrigger=PropertyChanged}" Margin="10,10,0,0" 
                               HorizontalAlignment="Center" VerticalAlignment="Center"
                               FontSize="20" FontWeight="SemiBold" 
        			TextTrimming="WordEllipsis" TextWrapping="Wrap"/>
                </StackPanel>
            </Border>

        </DataTemplate>
    </Page.Resources>


    <Page.BottomAppBar>
        <CommandBar ClosedDisplayMode="Compact">
            <AppBarButton x:Name ="addContact"  Icon="AddFriend" Label="Add Contact" Click="AppBarButton_Click"/>
            <AppBarButton x:Name ="addGroup" Icon="People" Label="Create Group" Click="addGroup_Click"/>
            <AppBarButton x:Name="findContact" Icon="Find" Label="Find Contact" Click="findContact_Click"/>
            <AppBarButton x:Name="AddBackup" Icon="Folder" Label="Backup Contacts" Click="backup_Click"/>
        </CommandBar>
    </Page.BottomAppBar>


    <Grid x:Name="LayoutRoot">
        <Grid.RowDefinitions>
            <RowDefinition />
            <RowDefinition Height="7*"/>
        </Grid.RowDefinitions>
        <StackPanel x:Name="Header"
			Grid.Row="0"
			HorizontalAlignment="Left" 
			Height="77"
			VerticalAlignment="Top"
			Width="400">


            <StackPanel Orientation="Horizontal" Height="74">
                <StackPanel.Background>
                    <ImageBrush Stretch="Fill"/>
                </StackPanel.Background>

                <Canvas  x:Name="HeaderImg1" Width="135" Height="80" Background="#363951"  Tapped="HeaderImg1_Tapped" Opacity="30">
                    <Path x:Name="HeaderIcon1" 
						Width="50" 
						Height="50" 
						Canvas.Left="45"
						Canvas.Top="15"
						Stretch="Fill"
						Data="F1 M 27.0986,51.6256L 27.0961,51.6352L 27.2903,51.6352C 27.3908,51.6391 27.49,51.6505 27.5914,51.6505C 27.6935,51.6505 27.7923,51.6391 27.8928,51.6352L 46.9359,51.6352L 46.9359,51.6298C 47.0756,51.6352 47.2116,51.6505 47.3518,51.6505C 52.6937,51.6505 57.0245,47.2851 57.0245,41.8997C 57.0245,36.5142 52.6937,32.1489 47.3518,32.1489C 47.155,32.1489 46.9621,32.1666 46.7678,32.1784C 45.9377,27.6442 42.0022,24.206 37.2636,24.206C 31.9221,24.206 27.5914,28.5718 27.5914,33.9572C 27.5914,34.0986 27.6066,34.2372 27.6125,34.3778L 27.5914,34.3765C 22.8604,34.3765 19.0245,38.2432 19.0245,43.013C 19.0245,47.6157 22.5982,51.3667 27.0986,51.6256 Z " UseLayoutRounding="False" 
                          />
                </Canvas>
                <Canvas  x:Name="HeaderImg2" Width="135" Height="80" Background="#363951" Tapped="HeaderImg2_Tapped">
                    <Path x:Name="HeaderIcon2" Width="50" 
						Height="50"
						Canvas.Left="45"
						Canvas.Top="15"
						Stretch="Fill" 
						Data="F1 M 22,19L 24,19L 24,57L 22,57L 22,19 Z M 26,57L 26,19.0001L 53.9999,19.0001L 53.9999,57L 26,57 Z M 30,24L 30,27L 50,27L 50,24L 30,24 Z M 30,32L 30,35L 33,35L 33,32L 30,32 Z M 36,32L 36,35L 49,35L 49,32L 36,32 Z M 30,40L 30,43L 33,43L 33,40L 30,40 Z M 36,40L 36,43L 48,43L 48,40L 36,40 Z M 30,48L 30,51L 33,51L 33,48L 30,48 Z M 36,48L 36,51L 50,51L 50,48L 36,48 Z "
						Opacity="100"
                          />

                </Canvas>
                <Canvas  x:Name="HeaderImg3" Width="135" Height="80" Background="#363951" Tapped="HeaderImg3_Tapped">
                    <Path x:Name="HeaderIcon3"
						Width="50"
						Height="50"
						Canvas.Left="42" 
						Canvas.Top="15"
						Stretch="Fill"
						Data="F1 M 38,26.9167C 42.618,26.9167 44.5972,29.5555 43.9312,35.0945C 44.5262,35.4358 44.9271,36.0773 44.9271,36.8125C 44.9271,37.7121 44.3269,38.4715 43.5051,38.7122C 43.1618,39.9358 42.6286,41.0191 41.9583,41.8856L 41.9583,46.0486C 44.1574,46.4884 45.9167,46.7083 48.5555,48.0278C 51.1944,49.3472 52.0741,50.5567 53.8333,52.316L 53.8333,58.5833L 22.1667,58.5833L 22.1666,52.316C 23.9259,50.5567 24.8055,49.3472 27.4444,48.0278C 30.0833,46.7083 31.8426,46.4884 34.0417,46.0486L 34.0417,41.8856C 33.3714,41.0191 32.8382,39.9358 32.4949,38.7121C 31.6731,38.4715 31.0729,37.7121 31.0729,36.8125C 31.0729,36.0773 31.4737,35.4358 32.0688,35.0945C 31.4028,29.5555 33.3819,26.9167 38,26.9167 Z M 25.8611,46.8403C 23.6735,47.9341 23.8824,47.7648 22.6094,49.0834L 12.6667,49.0833L 12.6667,42.816C 14.4259,41.0567 15.3056,39.8472 17.9444,38.5278C 20.5833,37.2083 22.3426,36.9884 24.5417,36.5486L 24.5417,32.3856C 23.8714,31.5191 23.3382,30.4359 22.9949,29.2122C 22.1731,28.9715 21.5729,28.2121 21.5729,27.3125C 21.5729,26.5773 21.9738,25.9358 22.5688,25.5945C 21.9028,20.0556 23.8819,17.4167 28.5,17.4167C 32.8315,17.4167 34.8414,20.9258 34.5246,25.7844C 31.6667,26.9167 30.0833,28.5 30.0896,33.1153C 29.4946,33.4566 29.0938,34.0982 29.0938,34.8333C 29.0938,35.7329 29.2981,36.8882 30.1199,37.1288C 30.4632,38.3525 30.9964,39.4358 31.6667,40.3023L 31.6667,44.8611C 29.4676,45.3009 28.5,45.5208 25.8611,46.8403 Z M 50.1389,46.8403C 47.5,45.5208 46.5324,45.3009 44.3333,44.8611L 44.3333,40.3023C 45.0036,39.4358 45.5368,38.3525 45.8801,37.1288C 46.7019,36.8882 46.9062,35.7329 46.9062,34.8333C 46.9062,34.0982 46.5054,33.4566 45.9104,33.1153C 45.9167,28.5 44.3333,26.9167 41.4754,25.7844C 41.1585,20.9257 43.1685,17.4167 47.5,17.4167C 52.118,17.4167 54.0972,20.0555 53.4312,25.5945C 54.0262,25.9358 54.4271,26.5773 54.4271,27.3125C 54.4271,28.2121 53.8269,28.9715 53.0051,29.2121C 52.6618,30.4358 52.1286,31.5191 51.4583,32.3856L 51.4583,36.5486C 53.6574,36.9884 55.4166,37.2083 58.0555,38.5278C 60.6944,39.8472 61.5741,41.0567 63.3333,42.816L 63.3333,49.0833L 53.3906,49.0833C 52.1176,47.7648 52.3265,47.9341 50.1389,46.8403 Z " 
						Opacity="100"
                          />

                </Canvas>
            </StackPanel>
        </StackPanel>
        
        
        <Pivot x:Name="ContentArea" Margin="0,99,0,0" HorizontalAlignment="Left" Width="400" Background="#0C0B15" Grid.RowSpan="2" SelectionChanged="ContentArea_SelectionChanged">


            <PivotItem x:Name="firstPage" IsHoldingEnabled="True" Margin="0,-24,0,0"  >
                <StackPanel Orientation="Vertical" VerticalAlignment="Center" HorizontalAlignment="Center" Width="400" >
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Center">
                        <TextBlock  HorizontalAlignment="Center" TextWrapping="Wrap" Text="Cloud Backups" VerticalAlignment="Top" Margin="10, 10, 10, 10" FontSize="44"/>
                    </StackPanel>
                    <ListView HorizontalAlignment="Center" VerticalAlignment="Center"  FontSize="22" Width="367.661"  ScrollViewer.HorizontalScrollMode="Disabled" ScrollViewer.VerticalScrollMode="Enabled" Tapped="backup_Tapped" x:Name="BackupListView"  ItemTemplate="{ThemeResource backupTemplate}" Margin="10,10,10,10" Height="360" RenderTransformOrigin="0.5,0.5" UseLayoutRounding="False" d:LayoutRounding="Auto"/>
                </StackPanel>
            </PivotItem>



            <PivotItem x:Name="SecondPage" IsHoldingEnabled="True" Margin="0,-24,0,0"  >
                <StackPanel Orientation="Vertical" VerticalAlignment="Center" HorizontalAlignment="Center" Width="400" >
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Center">
                        <AppBarButton x:Name="sortButton" Icon="Sort" Height="55" Width="70" HorizontalAlignment="Center">

                            <AppBarButton.Flyout>
                                <MenuFlyout >
                                    <MenuFlyoutItem Text="Sort First Name" FontWeight="Bold" FontSize="28"/>
                                    <MenuFlyoutSeparator Height="15"/>
                                    <MenuFlyoutItem  Text="Ascending" Click="MenuFlyoutItem_Click_1" />
                                    <MenuFlyoutItem Text="Descending" Click="MenuFlyoutItem_Click_2" />
                                    <MenuFlyoutSeparator Height="15"/>
                                    <MenuFlyoutItem Text="Sort Last Name" FontWeight="Bold" FontSize="28"/>
                                    <MenuFlyoutSeparator Height="15"/>
                                    <MenuFlyoutItem Text="Ascending" Click="MenuFlyoutItem_Click_3" />
                                    <MenuFlyoutItem Text="Descending" Click="MenuFlyoutItem_Click_4" />


                                </MenuFlyout>
                            </AppBarButton.Flyout>

                        </AppBarButton>
                        <TextBlock  Text="Contacts" VerticalAlignment="Center" HorizontalAlignment="Center" FontSize="44"  />
                    </StackPanel>
                    <ListView x:Name="ContactListView"  IsHoldingEnabled="True" FontSize="43"  HorizontalAlignment="Center" ItemsSource="{Binding listOfContacts, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
						Height="408" VerticalAlignment="Top" Width="400" ItemTemplate="{StaticResource ImageTextListMailFolderTemplate}" Tapped="ContactListView_Tapped"/>
                </StackPanel>
            </PivotItem>

            <PivotItem x:Name="ThirdPage" Margin="10,0">
                <StackPanel Orientation="Vertical" Width="390" Height="auto">
                    <TextBlock Text ="Groups"  VerticalAlignment="Center"
                               HorizontalAlignment="Center" FontSize="44"/>
                    <GridView x:Name="GridForGroups" 
                          Height="450" Width="380" ItemsSource="{Binding listOfGroups}" 
                          ItemTemplate="{ThemeResource GridTemplate}">

                    </GridView>
                </StackPanel>
            </PivotItem>
        </Pivot>

        <Grid x:Name="SearchBox" Visibility="Collapsed" Grid.Row="1">
            <Grid Background="Black" Opacity="0.5"/>
            <Border
            MinWidth="250"
            Background="#363951" 
            BorderBrush="Black" 
            BorderThickness="1" 
            HorizontalAlignment="Center" 
            VerticalAlignment="Center">
                <StackPanel>
                    <TextBlock Margin="5" Text="Search:" FontSize="15" FontWeight="Bold" />
                    <TextBox MinWidth="150" HorizontalAlignment="Center" VerticalAlignment="Center" x:Name="InputTextBox"/>
                    <ComboBox x:Name="searchOptions" HorizontalAlignment="Center" MinWidth="150" PlaceholderText="Search by..">
                        <TextBlock  Text="First Name"/>
                        <TextBlock Text="Last Name"/>
                    </ComboBox>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                        <Button x:Name="YesButton" Margin="5" Content="Search" Click="YesButton_Click">

                            <Button.Flyout>
                                <ListPickerFlyout x:Name="resultPicker" ItemsPicked="resultPicker_ItemsPicked"/>
                            </Button.Flyout>

                        </Button>
                        <Button x:Name="NoButton" Margin="5" Content="Cancel" Click="NoButton_Click" />
                    </StackPanel>
                </StackPanel>
            </Border>
        </Grid>
        <Grid x:Name="Backupbox" Visibility="Collapsed" Grid.Row="1">
            <Grid Background="Black" Opacity="0.5"/>
            <Border
            MinWidth="250"
            Background="#363951" 
            BorderBrush="Black" 
            BorderThickness="1" 
            HorizontalAlignment="Center" 
            VerticalAlignment="Center">
                <StackPanel>

                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                        <Button x:Name="Download" Margin="5" Content="download" Click="Download_Click">
                        </Button>
                        <Button x:Name="upload" Margin="5" Content="upload" Click="upload_Click" />
                    </StackPanel>
                    <Button HorizontalAlignment="Center" x:Name="Closebackup" Margin="5" Click="Closebackup_Click" >close</Button>
                </StackPanel>
            </Border>
        </Grid>
    </Grid>
</Page>
